<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<script type="text/javascript" src="quandrants.js"></script>
		<script type="text/javascript" src="Box.js"></script>
		<script type="text/javascript" src="Histogram.js"></script>
	</head>
	<body>
		<script type="text/javascript">
		function loadAll()
		{
			var picture = document.getElementById('refpix');
			var canvas = document.getElementById("canvas");
			canvas.oncontextmenu = function (e) {
				e.preventDefault();
			};
			canvas.width = picture.naturalWidth;
			canvas.height = picture.naturalHeight;

			quads = new quandrants( canvas );
			quads.initialize( picture ); //fb.jpg
		}
		</script>

		<div id="buttons">
			<div id="controls">
				<button id="playButton"   onclick="play()">Play</button>
				<button id="pauseButton"  onclick="step()">Step</button>
				<button id="stopButton"   onclick="stop()">Stop</button>
				<button id="createButton" onclick="create()">Convert to Picture</button>
				<p id="saveMe" style="display:none;"> Right click to save me! </p>
			</div>
			<div id="settings">
				<p>
					Divisions: <span id="divisions"></span>
					Iterations: <span id="iterationsleft"><script>document.write(ITERATIONS)</script></span>
					<span>Shading
						<select id="styleselectbox" disabled="true">
							<option value="box">Shaded</option>
							<option value="boxborder">Shaded with Border</option>
							<option value="hatch">Cross Hatches</option>
							<option value="hatchshaded">Cross Hatches with Shading</option>
						</select>
					</span>
				</p>
			</div>

		</div>

		<div id="display">
			<canvas id="canvas" width="480px" height="650px" style="border:1px solid #000000;margin: 5px;"> <!--width="770px" height="500px" -->
				<p>Your browser doesn't support canvas.</p>
			</canvas>
			<img id="refpix" onload="loadAll()" src="pix/Mario.jpg" style="display:none;border:1px solid #000000;margin: 5px;" />
		</div>

		<script>
			var quads;


			function play()
			{
				console.log( "Program Started");
				if( ITERATIONS == 0 )
				{
					ITERATIONS += 1000;
				}
				quads.play();

			};

			function stop()
			{
				quads.stop();
				console.log( "Program Halted");
			};

			function step()
			{
				quads.step();
				console.log( "Program Stepped");
			};

			function create()
			{
				quads.stop();
				playButton.style.display   = 'none';
				stopButton.style.display   = 'none';
				pauseButton.style.display  = 'none';
				createButton.style.display = 'none';

				var dataUrl = canvas.toDataURL();
				var img = document.getElementById('refpix');
				img.src = dataUrl;
				canvas.style.display = 'none';
				saveMe.style.display = "block";
				img.style.display = "block";
			};
		</script>
	</body>
</html>
